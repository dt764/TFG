<h2 class="display-3 p-3 mb-4" style="font-weight: 600;">Usuarios</h2>

<div *ngIf="successMessage" class="alert alert-success fs-4">
  {{ successMessage }}
</div>

<!-- Buscador -->
<div class="container mb-4">
  <input
    type="text"
    class="form-control form-control-lg"
    placeholder="Buscar por nombre, apellido, matrícula o email"
    [(ngModel)]="searchTerm"
  />
</div>

<!-- Selector de filas por página -->
<div class="container d-flex justify-content-between align-items-center mb-3">
  <div>
    <label for="itemsPerPageSelect" class="me-2">Filas por página:</label>
    <select id="itemsPerPageSelect"
            class="form-select d-inline w-auto"
            [(ngModel)]="itemsPerPage"
            (change)="currentPage = 1">
      <option *ngFor="let size of pageSizeOptions" [value]="size">{{ size }}</option>
    </select>
  </div>
</div>

<!-- Tabla -->
<div class="container-fluid">
  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Nombre</th>
          <th>Email</th>
          <th>Matrículas</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of filteredUsers | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }">
          <td>
            <a [routerLink]="'/users/' + user.id" class="text-decoration-none text-dark">
              {{ user.first_name }} {{ user.last_name }}
            </a>
          </td>
          <td>{{ user.email }}</td>
          <td>
            <span *ngFor="let plate of user.plates" class="badge bg-primary me-1 mb-1">{{ plate }}</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Paginador -->
<div class="container">
  <pagination-controls
    (pageChange)="currentPage = $event"
    [autoHide]="true"
    class="d-flex justify-content-center mt-3">
  </pagination-controls>
</div>
